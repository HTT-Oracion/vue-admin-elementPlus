{"version":3,"sources":["webpack:///./src/views/Goods/Categories.vue","webpack:///./src/api/goods/cate.js","webpack:///./src/views/Goods/Categories.vue?1d0b","webpack:///./src/api/goods/add.js"],"names":["class","style","firstName","secondName","type","toAddCate","data","cateList","border","striped","ref","label","prop","default","scope","row","cat_deleted","cat_level","size","icon","undevelop","handleSizeChange","handleCurrentChange","current-page","queryInfo","pagenum","page-sizes","page-size","pagesize","layout","total","background","title","addCateVisible","width","cancelAddCate","label-width","model","addForm","rules","addFormRules","cat_name","selectedVal","options","parentCateList","props","cateProps","handleChange","clearable","confirmAddCate","getCateListRequest","info","axios","get","CATE","params","meta","status","errMsg","_","cloneDeep","result","getParentListReq","name","components","MyBreadcrumb","setup","addFormRef","tableRef","state","tpye","cat_pid","required","message","trigger","expandTrigger","value","children","getParentCateList","val","length","resetFields","validate","valid","add","getCateList","newSize","newPage","render","addGoodRequest","form","$router","post","GOODS","console","log","msg","successMsg","push","addCateRequest"],"mappings":"kKAKqD,Q,SAUzCA,MAAM,gBACNC,MAAA,e,SAEQD,MAAM,kBAAkBC,MAAA,sB,+BAKO,M,+BAEtC,M,+BAE2B,M,+BA0Dc,M,+BACI,M,muBArFxD,yBAAkE,GAAnDC,UAAU,OAAOC,WAAW,SAC3C,yBAwDU,Q,8BAvDR,iBAIS,CAJT,yBAIS,Q,8BAHP,iBAES,CAFT,yBAES,Q,8BADP,iBAA6D,CAA7D,yBAA6D,GAAlDC,KAAK,UAAW,QAAO,EAAAC,W,+BAAW,iBAAI,C,8CAGrD,yBAsCW,GAtCAC,KAAM,EAAAC,SAAUC,OAAA,GAAOC,QAAA,GAAQC,IAAI,Y,+BAC5C,iBAA2D,CAA3D,yBAA2D,GAA1CN,KAAK,QAAQO,MAAM,MACpC,yBAAiE,GAAhDA,MAAM,OAAOC,KAAK,aACnC,yBASkB,GATDD,MAAM,QAAM,CAChBE,QAAO,sBAChB,SADuB,GACvB,MADuB,CAEfC,EAAMC,IAAIC,a,yBADlB,yBAIK,IAJL,K,yBAKA,yBAAgE,IAAhE,Q,MAGJ,yBAQkB,GARDL,MAAM,MAAI,CACdE,QAAO,sBAChB,SADuB,GACvB,MADuB,CACU,IAAnBC,EAAMC,IAAIE,W,yBAAxB,yBAAoD,W,8BAAX,iBAAE,C,aACL,IAAnBH,EAAMC,IAAIE,W,yBAA7B,yBAEC,G,MAF6Cb,KAAK,W,+BAChD,iBAAE,C,uCAEL,yBAAyC,G,MAA1BA,KAAK,W,+BAAU,iBAAE,C,uBAGpC,yBAekB,GAfDO,MAAM,MAAI,CACdE,QAAO,sBAChB,SADuB,GACvB,MADuB,CACvB,yBAKa,GAJXK,KAAK,OACLd,KAAK,UACLe,KAAK,eACJ,QAAK,mBAAE,EAAAC,UAAUN,EAAMC,O,oBAE1B,yBAKa,GAJXG,KAAK,OACLd,KAAK,SACLe,KAAK,iBACJ,QAAO,EAAAC,W,mDAKhB,yBAUgB,GATb,aAAa,EAAAC,iBACb,gBAAgB,EAAAC,oBAChBC,eAAc,EAAAC,UAAUC,QACxBC,aAAY,CAAC,EAAG,EAAG,GAAI,IACvBC,YAAW,EAAAH,UAAUI,SACtBC,OAAO,0CACNC,MAAO,EAAAA,MACRC,WAAA,I,wFAIJ,yBA8BY,GA7BVC,MAAM,O,WACG,EAAAC,e,qDAAA,EAAAA,eAAc,IACvBC,MAAM,MACL,QAAO,EAAAC,e,+BAER,iBAuBU,CAvBV,yBAuBU,GAtBRC,cAAY,QACXC,MAAO,EAAAC,QACPC,MAAO,EAAAC,aACR9B,IAAI,c,+BAEJ,iBAEe,CAFf,yBAEe,GAFDC,MAAM,QAAQC,KAAK,Y,+BAC/B,iBAAgD,CAAhD,yBAAgD,G,WAA7B,EAAA0B,QAAQG,S,qDAAR,EAAAH,QAAQG,SAAQ,K,iCAErC,yBASe,GATD9B,MAAM,SAAO,C,8BACzB,iBAOc,CAPd,yBAOc,G,WANH,EAAA+B,Y,qDAAA,EAAAA,YAAW,IACnBC,QAAS,EAAAC,eACTC,MAAO,EAAAC,UACP,SAAQ,EAAAC,aACTC,UAAA,I,8DAIJ,yBAGe,GAHDhD,MAAM,QAAM,C,8BACxB,iBAA4D,CAA5D,yBAA4D,GAAjDI,KAAK,OAAQ,QAAO,EAAA+B,e,+BAAe,iBAAE,C,0BAChD,yBAAgE,GAArD/B,KAAK,UAAW,QAAO,EAAA6C,gB,+BAAgB,iBAAE,C,qOClF/CC,EAAkB,yDAAG,WAAMC,GAAN,yGACTC,OAAMC,IAAIC,OAAM,CACrCC,OAAQJ,IAFsB,mBACxB7C,EADwB,EACxBA,KAGiB,MAArBA,EAAKkD,KAAKC,OAJkB,yCAIKC,eAAO,cAJZ,gCAKzB,CACLnD,SAAUoD,IAAEC,UAAUtD,EAAKA,KAAKuD,QAChC/B,MAAOxB,EAAKA,KAAKwB,QAPa,2CAAH,sDAUlBgC,EAAgB,yDAAG,sHACPV,OAAMC,IAAIC,OAAM,CACrCC,OAAQ,CAAEnD,KAAM,KAFY,mBACtBE,EADsB,EACtBA,KAGiB,MAArBA,EAAKkD,KAAKC,OAJgB,yCAIOC,eAAO,YAJd,gCAKvBpD,EAAKA,MALkB,2CAAH,qDDoFd,GACbyD,KAAM,aACNC,WAAY,CACVC,eAAA,MAEFC,MALa,WAMX,IAAMC,EAAa,iBAAI,IACjBC,EAAW,iBAAI,IACfC,EAAQ,sBAAS,CACrB9D,SAAU,GACViB,UAAW,CACT8C,KAAM,EACN7C,QAAS,EACTG,SAAU,IAEZE,MAAO,EACPG,gBAAgB,EAChBK,QAAS,CACPG,SAAU,GACV8B,QAAS,EACTtD,UAAW,GAEbuB,aAAc,CACZC,SAAU,CACR,CAAE+B,UAAU,EAAMC,QAAS,UAAWC,QAAS,UAGnDhC,YAAa,GACbE,eAAgB,GAChBE,UAAW,CACT6B,cAAe,QACfC,MAAO,SACPjE,MAAO,WACPkE,SAAU,cAIRxE,EAAY,WAChByE,IACAT,EAAMpC,gBAAiB,GAGnBc,EAAe,SAACgC,GAEpB,GAAIV,EAAM3B,YAAYsC,OAAS,EAI7B,OAHAX,EAAM/B,QAAQiC,QAAUF,EAAM3B,YAAY2B,EAAM3B,YAAYsC,OAAS,QAErEX,EAAM/B,QAAQrB,UAAYoD,EAAM3B,YAAYsC,QAG5CX,EAAM/B,QAAQiC,QAAU,EACxBF,EAAM/B,QAAQrB,UAAY,GAIxBkB,EAAgB,WACpBgC,EAAWS,MAAMK,cACjBZ,EAAM3B,YAAc,GACpB2B,EAAM/B,QAAQrB,UAAY,EAC1BoD,EAAM/B,QAAQiC,QAAU,EACxBF,EAAMpC,gBAAiB,GAGnBgB,EAAiB,WACrBkB,EAAWS,MAAMM,SAAjB,yDAA0B,WAAMC,GAAN,oFACnBA,EADmB,iEAElB,OAAAC,EAAA,MAAef,EAAM/B,SAFH,OAGxBH,IACAkD,IAJwB,2CAA1B,wDAQIhE,EAAmB,SAACiE,GACxBjB,EAAM7C,UAAUI,SAAW0D,EAC3BD,KAEI/D,EAAsB,SAACiE,GAC3BlB,EAAM7C,UAAUC,QAAU8D,EAC1BF,KAGIP,EAAgB,yDAAI,8GACKhB,IADL,OACxBO,EAAMzB,eADkB,kDAAJ,qDAIhByC,EAAU,yDAAI,wHACgBnC,EAAmBmB,EAAM7C,WADzC,gBACVjB,EADU,EACVA,SAAUuB,EADA,EACAA,MAClBuC,EAAM9D,SAAWA,EACjB8D,EAAMvC,MAAQA,EAHI,2CAAJ,qDAKVV,EAAY,SAACL,GACjB,eAAY,UAMd,OAJA,wBAAU,WACRsE,IACA,eAAQjB,MAEV,iCACK,oBAAOC,IADZ,IAEEF,aACAC,WACAhD,YACAiE,cACAhE,mBACAC,sBACAyB,eACA1C,YACA8B,gBACAc,qBE3MN,EAAOuC,OAASA,EAED,gB,oKCDTC,EAAc,yDAAG,WAAOC,EAAMC,GAAb,yGACEvC,OAAMwC,KAAKC,OAAOH,GADpB,mBACbpF,EADa,EACbA,KACRwF,QAAQC,IAAI,OAAQzF,GACK,MAArBA,EAAKkD,KAAKC,OAHO,yCAGgBC,eAAOpD,EAAKkD,KAAKwC,MAHjC,OAIrBC,eAAW,QACXN,EAAQO,KAAR,WAAiBL,SALI,2CAAH,wDAOdM,EAAc,yDAAG,WAAMT,GAAN,yGACEtC,OAAMwC,KAAKtC,OAAMoC,GADnB,mBACbpF,EADa,EACbA,KACiB,MAArBA,EAAKkD,KAAKC,OAFO,yCAEgBC,eAAO,UAFvB,OAGrBuC,eAAW,WAHU,2CAAH","file":"js/categories.8bba0782.js","sourcesContent":["<template>\r\n  <my-breadcrumb firstName=\"商品管理\" secondName=\"商品分类\"></my-breadcrumb>\r\n  <el-card>\r\n    <el-row>\r\n      <el-col>\r\n        <el-button type=\"primary\" @click=\"toAddCate\">添加分类</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-table :data=\"cateList\" border striped ref=\"tableRef\">\r\n      <el-table-column type=\"index\" label=\"#\"> </el-table-column>\r\n      <el-table-column label=\"商品名称\" prop=\"cat_name\"> </el-table-column>\r\n      <el-table-column label=\"是否有效\">\r\n        <template #default=\"scope\">\r\n          <i\r\n            v-if=\"scope.row.cat_deleted\"\r\n            class=\"el-icon-error\"\r\n            style=\"color: red\"\r\n          ></i>\r\n          <i v-else class=\"el-icon-success\" style=\"color: lightgreen\"></i>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"排序\">\r\n        <template #default=\"scope\">\r\n          <el-tag v-if=\"scope.row.cat_level === 0\">一级</el-tag>\r\n          <el-tag v-else-if=\"scope.row.cat_level === 1\" type=\"success\"\r\n            >二级</el-tag\r\n          >\r\n          <el-tag v-else type=\"warning\">三级</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template #default=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            @click=\"undevelop(scope.row)\"\r\n          ></el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"undevelop\"\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"queryInfo.pagenum\"\r\n      :page-sizes=\"[3, 5, 10, 15]\"\r\n      :page-size=\"queryInfo.pagesize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      background\r\n    >\r\n    </el-pagination>\r\n  </el-card>\r\n  <el-dialog\r\n    title=\"添加分类\"\r\n    v-model=\"addCateVisible\"\r\n    width=\"50%\"\r\n    @close=\"cancelAddCate\"\r\n  >\r\n    <el-form\r\n      label-width=\"100px\"\r\n      :model=\"addForm\"\r\n      :rules=\"addFormRules\"\r\n      ref=\"addFormRef\"\r\n    >\r\n      <el-form-item label=\"分类名称:\" prop=\"cat_name\">\r\n        <el-input v-model=\"addForm.cat_name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"父级分类:\">\r\n        <el-cascader\r\n          v-model=\"selectedVal\"\r\n          :options=\"parentCateList\"\r\n          :props=\"cateProps\"\r\n          @change=\"handleChange\"\r\n          clearable\r\n        >\r\n        </el-cascader>\r\n      </el-form-item>\r\n      <el-form-item class=\"btns\">\r\n        <el-button type=\"info\" @click=\"cancelAddCate\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmAddCate\">确定</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, ref, toRefs } from 'vue'\r\nimport { resetTh, unDeveloped } from '@/utils/viewTools'\r\nimport MyBreadcrumb from '@/components/MyBreadcrumb'\r\nimport { addCateRequest } from '@/api/goods/add'\r\nimport { getCateListRequest, getParentListReq } from '@/api/goods/cate'\r\nexport default {\r\n  name: 'Categories',\r\n  components: {\r\n    MyBreadcrumb\r\n  },\r\n  setup () {\r\n    const addFormRef = ref('')\r\n    const tableRef = ref('')\r\n    const state = reactive({\r\n      cateList: [],\r\n      queryInfo: {\r\n        tpye: 3,\r\n        pagenum: 1,\r\n        pagesize: 10\r\n      },\r\n      total: 0,\r\n      addCateVisible: false,\r\n      addForm: {\r\n        cat_name: '',\r\n        cat_pid: 0,\r\n        cat_level: 0\r\n      },\r\n      addFormRules: {\r\n        cat_name: [\r\n          { required: true, message: \"请输入分类名称\", trigger: \"blur\" },\r\n        ]\r\n      },\r\n      selectedVal: [],\r\n      parentCateList: [],\r\n      cateProps: {\r\n        expandTrigger: 'hover',\r\n        value: 'cat_id',\r\n        label: 'cat_name',\r\n        children: 'children'\r\n      }\r\n    })\r\n    // 添加分类按钮\r\n    const toAddCate = () => {\r\n      getParentCateList()\r\n      state.addCateVisible = true\r\n    }\r\n    // 级联选择器change\r\n    const handleChange = (val) => {\r\n      // console.log(state.selectedVal.length);\r\n      if (state.selectedVal.length > 0) {\r\n        state.addForm.cat_pid = state.selectedVal[state.selectedVal.length - 1]\r\n        // 等级\r\n        state.addForm.cat_level = state.selectedVal.length\r\n        return;\r\n      } else {\r\n        state.addForm.cat_pid = 0\r\n        state.addForm.cat_level = 0\r\n      }\r\n    }\r\n    // 取消添加分类\r\n    const cancelAddCate = () => {\r\n      addFormRef.value.resetFields()\r\n      state.selectedVal = []\r\n      state.addForm.cat_level = 0\r\n      state.addForm.cat_pid = 0\r\n      state.addCateVisible = false\r\n    }\r\n    // 确认添加分类\r\n    const confirmAddCate = () => {\r\n      addFormRef.value.validate(async valid => {\r\n        if (!valid) return\r\n        await addCateRequest(state.addForm)\r\n        cancelAddCate()\r\n        getCateList()\r\n      })\r\n    }\r\n    // 分页器\r\n    const handleSizeChange = (newSize) => {\r\n      state.queryInfo.pagesize = newSize\r\n      getCateList()\r\n    }\r\n    const handleCurrentChange = (newPage) => {\r\n      state.queryInfo.pagenum = newPage\r\n      getCateList()\r\n    }\r\n    // 获取父级分类列表\r\n    const getParentCateList = async () => {\r\n      state.parentCateList = await getParentListReq()\r\n    }\r\n    // 获取分类列表\r\n    const getCateList = async () => {\r\n      const { cateList, total } = await getCateListRequest(state.queryInfo)\r\n      state.cateList = cateList\r\n      state.total = total\r\n    }\r\n    const undevelop = (row) => {\r\n      unDeveloped('功能未开发')\r\n    }\r\n    onMounted(() => {\r\n      getCateList()\r\n      resetTh(tableRef)\r\n    })\r\n    return {\r\n      ...toRefs(state),\r\n      addFormRef,\r\n      tableRef,\r\n      undevelop,\r\n      getCateList,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      handleChange,\r\n      toAddCate,\r\n      cancelAddCate,\r\n      confirmAddCate\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>","import axios from '../request'\r\nimport { CATE } from '@/utils/constants'\r\nimport { errMsg } from '@/utils/viewTools'\r\nimport _ from 'loadsh'\r\nexport const getCateListRequest = async info => {\r\n  const { data } = await axios.get(CATE, {\r\n    params: info\r\n  })\r\n  if (data.meta.status !== 200) return errMsg('获取分类列表失败!')\r\n  return {\r\n    cateList: _.cloneDeep(data.data.result),\r\n    total: data.data.total\r\n  }\r\n}\r\nexport const getParentListReq = async () => {\r\n  const { data } = await axios.get(CATE, {\r\n    params: { type: 2 }\r\n  })\r\n  if (data.meta.status !== 200) return errMsg('获取数据失败!')\r\n  return data.data\r\n}","import { render } from \"./Categories.vue?vue&type=template&id=7bcf2ead\"\nimport script from \"./Categories.vue?vue&type=script&lang=js\"\nexport * from \"./Categories.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import axios from '../request'\r\nimport { CATE, GOODS } from '@/utils/constants'\r\nimport { successMsg, errMsg } from '@/utils/viewTools'\r\n\r\nconst addGoodRequest = async (form, $router) => {\r\n  const { data } = await axios.post(GOODS, form)\r\n  console.log('添加商品', data);\r\n  if (data.meta.status !== 201) return errMsg(data.meta.msg)\r\n  successMsg('添加成功')\r\n  $router.push(`/${GOODS}`)\r\n}\r\nconst addCateRequest = async form => {\r\n  const { data } = await axios.post(CATE, form)\r\n  if (data.meta.status !== 201) return errMsg('添加失败!')\r\n  successMsg('添加分类成功!')\r\n}\r\nexport {\r\n  addGoodRequest,\r\n  addCateRequest\r\n}"],"sourceRoot":""}